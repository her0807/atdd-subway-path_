# 지하철 경로 조회 🚈

## 기능 요구 사항

### 경로 조회 기능 API

- [x] 최단 경로 조회 기능
    - [x] 동일한 역의 경로일 경우 에러 응답
    - [x] 이동할 수 없는 경로일 경우 에러 응답

#### 요금 계산 방법

- 기본운임(10㎞ 이내): 기본운임 1,250원
- 이용 거리 초과 시 추가운임 부과
- 10km~50km: 5km 까지 마다 100원 추가
- 50km 초과: 8km 까지 마다 100원 추가

```
9km = 1250원
12km = 10km + 2km = 1350원
16km = 10km + 6km = 1450원
58km = 10km + 40km + 8km = 2150원
```

### 최단 경로 라이브러리 사용

- jgrapht 라이브러리를 활용하면 간편하게 최단거리를 조회할 수 있음
- 정점(vertex)과 간선(edge), 그리고 가중치 개념을 이용
- 정점: 지하철역(Station)
- 간선: 지하철역 연결정보(Section)
- 가중치: 거리
- 최단 거리 기준 조회 시 가중치를 거리로 설정

---

## 필요 기능

- 모든 노선 정보를 가지고 맵을 만든다.
- 출발역과 도착역의 경로와 거리를 얻어온다.
- 해당 거리에 대한 비용을 계산한다.
- 경로, 거리, 비용을 포함하는 결과를 응답한다.

## 도메인 설계

#### 지하철 노선도 (SubwayMap)

- 모든 노선 정보를 가지고 있다.
- 출발역과 도착역이 주어지면 최단 경로와 거리를 계산한다.

---

## 🧑🏻‍💻 릭 & 라라 페어 컨벤션 👩🏻‍💻

### 페어 프로그래밍

- 50분 개발, 10분 휴식
- 테스트 코드를 먼저 작성하고 프로덕션 코드 작성하기 !!

### 소셜

- 질문에 꼭 대답하기
- 서로의 다른 의견에 존중하기
- 다른 크루들의 코드에 흔들리지 않기
- 우리 코드가 짱이다 ! 👍

### 코드 컨벤션

- 클래스 선언부 한 줄 띄기
- 필요한 상황에만 공백을 넣기
- final 키워드 사용

---

## 시나리오

```markdown
Feature: 지하철 역 관련 기능

    Scenario: 지하철 역 등록
        When: 지하철 역을 등록을 요청한다.
        Then: 새로운 역이 생성된다.
    
    Scenario: 중복된 이름의 역 등록
        Given: 답십리역 이라는 이름의 역을 등록한다.
        When: 답십리역 이라는 이름과 함께 지하철 역 등록 요청을 한다.
        Then: 역 등록에 실패한다.

    Scenario: 지하철 역 목록 조회
        Given: n개의 지하철 역을 등록한다.
        When: 지하철 역 목록을 조회한다.
        Then: n개의 지하철 역 정보를 응답 받고
        And: 각각의 지하철 역 정보는 id와 이름을 포함한다.

    Scenario: 지하철 역 제거
        Given: 답십리역 이라는 이름의 역을 등록한다.
        When: 답십리역 제거 요청을 한다.
        Then: 역을 제거한다.

Feature: 지하철 노선 관련 기능

    Scenario: 지하철 노선 등록
        Given: 상행 종점 역을 등록하고
        And: 하행 종점 역을 등록한다.
        When: 지하철 노선 등록을 요청한다.
        Then: 새로운 노선이 생성되고
        And: 생성한 노선 정보를 응답한다.

    Scenario: 지하철 노선 목록 조회
        Given: n개의 역을 등록하고
        And: n개의 지하철 노선을 등록한다.
        When: 지하철 노선 목록을 조회한다.
        Then: n개의 지하철 노선 정보를 응답 받고
        And: 각각의 노선 정보는 id, 이름, 색, 노선에 포함된 역들을 포함한다.

    Scenario: 지하철 노선 조회
        Given: n개의 역을 등록하고
        And: 지하철 노선을 등록한다.
        When: 지하철 노선을 조회한다.
        Then: 지하철 노선 정보를 응답 받고
        And: 노선 정보는 id, 이름, 색, n개의 역을 포함하고
        And: n개의 역은 상행 종점부터 하행 종점 순서로 정렬된 상태이다.

    Scenario: 지하철 노선 정보 수정
        Given: 상행 종점 역을 등록하고
        And: 하행 종점 역을 등록하고
        And: 지하철 노선을 등록한다.
        When: 지하철 노선의 이름, 색 변경을 요청한다.
        Then: 지하철 노선 정보가 수정된다.

    Scenario: 이미 존재하는 노선 이름으로 노선 정보 수정
        Given: 5호선이라는 이름의 노선을 등록하고
        And: 수인분당선이라는 이름의 노선을 등록한다.
        When: 수인분당선의 이름을 5호선으로 변경을 요청한다.
        Then: 노선 정보 수정에 실패한다.

    Scenario: 지하철 노선 삭제
        Given: 지하철 노선을 등록한다.
        When: 지하철 노선 삭제를 요청한다.
        Then: 노선이 삭제 된다.

Feature: 지하철 구간 관련 기능

    Scenario: 지하철 노선에 구간을 등록한다.
        Given: 왕십리역, 마장역, 답십리역을 등록하고, 
        And: 상행 종점이 왕십리역이고 하행 종점이 답십리역인 노선을 등록한다.
        When: 상행이 마장역이고 하행이 답십리역인 구간 등록 요청을 한다.
        Then: 새로운 구간이 등록된다.

    Scenario: 기존 구간보다 길이가 길거나 같은 새로운 구간을 기존 구간 사이에 등록한다.
        Given: 왕십리역, 마장역, 답십리역을 등록하고, 
        And: 상행 종점이 왕십리역이고 하행 종점이 답십리역이고 길이가 10km인 노선을 등록한다.
        When: 상행이 마장역이고 하행이 답십리역이고 길이가 10km 이상인 구간 등록 요청을 한다.
        Then: 구간 등록에 실패한다.

    Scenario: 노선에 포함되지 않는 역들을 구간으로 등록한다.
        Given: 왕십리역, 마장역, 답십리역, 장한평역을 등록하고, 
        And: 상행 종점이 왕십리역이고 하행 종점이 답십리역인 노선을 등록한다.
        When: 상행이 마장역이고 하행이 장한평역인 구간 등록 요청을 한다.
        Then: 구간 등록에 실패한다.

    Scenario: 모두 노선에 포함되어있는 역들을 구간으로 등록한다.
        Given: 왕십리역, 답십리역을 등록하고, 
        And: 상행 종점이 왕십리역이고 하행 종점이 답십리역인 노선을 등록한다.
        When: 상행이 답십리역이고 하행이 왕십리역인 구간 등록 요청을 한다.
        Then: 구간 등록에 실패한다.

    Scenario: 구간을 삭제한다.
        Given: 왕십리역, 마장역, 답십리역을 등록하고, 
        And: 상행 종점이 왕십리역이고 하행 종점이 답십리역인 5호선을 등록하고
        And: 상행이 마장역이고 하행이 답십리역인 구간을 등록한다.
        When: 5호선의 마장역이 포함된 구간 삭제를 요청한다.
        Then: 마장역이 포함된 구간이 삭제된다.

    Scenario: 구간이 하나인 노선의 구간을 삭제한다.
        Given: 왕십리역, 답십리역을 등록하고, 
        And: 상행 종점이 왕십리역이고 하행 종점이 답십리역인 5호선을 등록한다.
        When: 5호선의 왕십리역이 포함된 구간 삭제를 요청한다.
        Then: 구간 삭제에 실패한다.

Feature: 지하철 경로 관련 기능

    Scenario: 지하철 최단 경로 조회
        When: 출발역과 도착 역의 최단 경로를 조회한다.
        Then: 출발 역과 도착 역을 포함한 최단 경로의 역을 응답 받는다.
        And: 최단 경로의 길이를 응답 받는다.
        And: 요금을 응답 받는다.

    Scenario: 이동할 수 없는 경로 조회
        When: 이어져 있지않는 출발역과 도착 역의 최단 경로를 조회한다.
        Then: 경로 조회에 실패한다.
```